<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>JavaScript | Lily</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="JavaScript" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="This is what my JavaScript code looked like in second tri:" />
<meta property="og:description" content="This is what my JavaScript code looked like in second tri:" />
<link rel="canonical" href="https://lwu1822.github.io/fastpages/misc/2023/05/31/js.html" />
<meta property="og:url" content="https://lwu1822.github.io/fastpages/misc/2023/05/31/js.html" />
<meta property="og:site_name" content="Lily" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2023-05-31T00:00:00-05:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="JavaScript" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-05-31T00:00:00-05:00","datePublished":"2023-05-31T00:00:00-05:00","description":"This is what my JavaScript code looked like in second tri:","headline":"JavaScript","mainEntityOfPage":{"@type":"WebPage","@id":"https://lwu1822.github.io/fastpages/misc/2023/05/31/js.html"},"url":"https://lwu1822.github.io/fastpages/misc/2023/05/31/js.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/fastpages/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://lwu1822.github.io/fastpages/feed.xml" title="Lily" /><link rel="shortcut icon" type="image/x-icon" href="/fastpages/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css" integrity="sha512-h7nl+xz8wgDlNM4NqKEM4F1NkIRS17M9+uJwIGwuo8vGqIl4BhuCKdxjWEINm+xyrUjNCnK5dCrhM0sj+wTIXw==" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.js" integrity="sha512-/CMIhXiDA3m2c9kzRyd97MTb3MC6OVnx4TElQ7fkkoRghwDf6gi41gaT1PwF270W6+J60uTmwgeRpNpJdRV6sg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/contrib/auto-render.min.js" integrity="sha512-Do7uJAaHZm5OLrIv/yN4w0iG1dbu01kzdMNnFfu/mAqgUk6Nniv2JYHcwH+cNwjqgLcqcuBBk+JRvprLVI8azg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha512-0doc9hKxR3PYwso42RD1p5ySZpzzuDiOwMrdCEh2WdJZCjcmFKc/wEnL+z8fBQrnHoiNWbo+3fiGkOYXBdQp4A==" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/fastpages/">Lily</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/fastpages/about/">About Me</a><a class="page-link" href="/fastpages/notes/">Notes</a><a class="page-link" href="/fastpages/weekly-work/">Weekly Work</a><a class="page-link" href="/fastpages/cb/">College Board</a><a class="page-link" href="/fastpages/class/">Other classes</a><a class="page-link" href="/fastpages/search/">Search</a><a class="page-link" href="/fastpages/categories/">Tags</a><a class="page-link" href="/fastpages/t/CSA">CSA</a><a class="page-link" href="/fastpages/CSP/">CSP</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">JavaScript</h1><p class="post-meta post-meta-title"><time class="dt-published" datetime="2023-05-31T00:00:00-05:00" itemprop="datePublished">
        May 31, 2023
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      3 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/fastpages/categories/#misc">misc</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#implementations">Implementations</a></li>
<li class="toc-entry toc-h2"><a href="#additional-javascript">Additional JavaScript</a></li>
</ul><p>This is what my JavaScript code looked like in second tri:</p>

<p><img src="/fastpages/images/fetchinsidefetch.jpg" alt=""></p>

<p>A fetch inside a fetch…</p>

<p>Issue: Some operations are asynchrnous, which means that the outputs don’t come immediately. <code class="language-plaintext highlighter-rouge">fetch</code> is a good example of being asynchronous. As a result, it is possible for code after the fetch function to run before the fetch finishes executing. This can be an issue if you want parts of your code to run in order.</p>

<p>In tri 2, I resolved this by placing fetch within a fetch. However, this posed pretty big issues. For starters, the code looks incredibly messy. In addition, it was impossible to store data from a fetch request into a global variable because fetch was asynchrnous.</p>

<p>The solution that I learned in tri 3 was to use <code class="language-plaintext highlighter-rouge">async</code> and <code class="language-plaintext highlighter-rouge">await</code>. The first thing to do is to place the fetch request in a function that is labeled <code class="language-plaintext highlighter-rouge">async</code>. For example, this is what my code looked like for this trimester’s project:</p>

<p><img src="/fastpages/images/asyncfetch.jpg" alt=""></p>

<p>Now, instead of writing a super long fetch statement (as seen in the tri 2 code), where you have to use <code class="language-plaintext highlighter-rouge">.then</code>, and obtain the data in json format with <code class="language-plaintext highlighter-rouge">response.json().then</code>, you can simply fetch the data by using <code class="language-plaintext highlighter-rouge">await</code>. Similarily, to receive the data in JSON format, use <code class="language-plaintext highlighter-rouge">await</code> again (<code class="language-plaintext highlighter-rouge">await response.json()</code> in this example).</p>

<p><img src="/fastpages/images/await.jpg" alt=""></p>

<p><code class="language-plaintext highlighter-rouge">await</code> is useful because it “pauses” JavaScript until the asynchrnous function has executed. This way, your code can run in order.</p>

<p>You can even call entire <code class="language-plaintext highlighter-rouge">async</code> functions with <code class="language-plaintext highlighter-rouge">await</code>. For instance, the <code class="language-plaintext highlighter-rouge">async</code> function here is called with <code class="language-plaintext highlighter-rouge">await</code> in another function.</p>

<p><img src="/fastpages/images/asyncawait.jpg" alt=""></p>

<h2 id="implementations">
<a class="anchor" href="#implementations" aria-hidden="true"><span class="octicon octicon-link"></span></a>Implementations</h2>

<p>The pictures above show one example of me using async/await. Another feature that I made using async/await was to obtain the username of the user.</p>

<p><img src="/fastpages/images/welcome.jpg" alt=""></p>

<p>To do this, I created an <code class="language-plaintext highlighter-rouge">async</code> function called <code class="language-plaintext highlighter-rouge">fetchUsername()</code>.</p>

<p><img src="/fastpages/images/fetchusername.jpg" alt=""></p>

<p>This function takes filters the cookie using some regex filtering, and then sends it to the backend to be decoded. The backend returns the username.</p>

<p>Next, I created a function called <code class="language-plaintext highlighter-rouge">fetchUsernameOnly()</code>, which calls the <code class="language-plaintext highlighter-rouge">fetchUsername()</code> function using <code class="language-plaintext highlighter-rouge">await</code>. This demonstrates that you can call asynchrnous functions using <code class="language-plaintext highlighter-rouge">await</code>. <strong>However, you must put <code class="language-plaintext highlighter-rouge">await</code> inside an <code class="language-plaintext highlighter-rouge">async</code> function so that no errors occur</strong>.</p>

<p><img src="/fastpages/images/fetchusernameonly.jpg" alt=""></p>

<p>Now, on my profile page, I can easily call the <code class="language-plaintext highlighter-rouge">fetchUsernameOnly()</code> function using <code class="language-plaintext highlighter-rouge">await</code>.</p>

<p><img src="/fastpages/images/welcomemsg.jpg" alt=""></p>

<p>Something nice about async/await is that it makes JavaScript code more organized. As such, I could put my <code class="language-plaintext highlighter-rouge">getUsername</code> code in a separate .js file, and import it in my HTML file with: <code class="language-plaintext highlighter-rouge">&lt;script type="text/javascript" src="/fastpages/getUsername.js"&gt;&lt;/script&gt;</code>.</p>

<h2 id="additional-javascript">
<a class="anchor" href="#additional-javascript" aria-hidden="true"><span class="octicon octicon-link"></span></a>Additional JavaScript</h2>

<p>Something else that I worked on with JavaScript was to make a changing navbar based on the user’s login status.</p>

<p>For instance, when the user is logged out, the nav bar looks like this:</p>

<p><img src="/fastpages/images/login.jpg" alt=""></p>

<p>Then, when the user is logged in, the nav bar looks like this:</p>

<p><img src="/fastpages/images/logout.jpg" alt=""></p>

<p>My code looks like this:</p>

<p><img src="/fastpages/images/logincode.jpg" alt=""></p>

<p>First, I filtered the cookie. Then, I checked for its existence. If the cookie does not exist, that means the user is not logged in. As such, the nav bar should display “Log In”. The similar logic applies to logout:</p>

<p><img src="/fastpages/images/logoutcode.jpg" alt=""></p>

<p>The code to change the navbar is pretty straightforward, it creates HTML elements and then appends them to each other. It then finds the div element reserved for the item on the nav bar and then appends to that.</p>

  </div><!-- from https://github.com/utterance/utterances -->
<script src="https://utteranc.es/client.js"
        repo="lwu1822/fastpages"
        issue-term="title"
        label="blogpost-comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script><a class="u-url" href="/fastpages/misc/2023/05/31/js.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/fastpages/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="https://lwu1822.github.io/fastpages/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/fastpages/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>An easy to use blogging platform with support for Jupyter Notebooks.</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"></ul>
</div>

  </div>

</footer>
</body>

</html>
